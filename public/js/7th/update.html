<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      .addStudent {
        background-color: #f9f9f9;
        padding: 20px;
        border: 1px solid #ddd;
        border-radius: 8px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        max-width: 600px;
        margin: 20px auto;
        font-family: Arial, sans-serif;
      }

      .addStudent form {
        display: flex;
        flex-wrap: wrap;
        gap: 15px;
        align-items: center;
      }

      .addStudent label {
        font-weight: bold;
        color: #555;
        white-space: nowrap; /* Prevents labels from wrapping */
      }

      .addStudent input[type="text"] {
        flex: 1; /* Allows input fields to grow and fill available space */
        padding: 10px;
        border: 1px solid #ccc;
        border-radius: 4px;
        font-size: 1em;
      }

      .addStudent input[type="submit"] {
        background-color: #4caf50;
        color: white;
        padding: 10px 20px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-size: 1em;
        font-weight: bold;
        transition: background-color 0.3s ease;
      }

      .addStudent input[type="submit"]:hover {
        background-color: #45a049;
      }
    </style>
  </head>
  <body>
    <h3>수정화면</h3>
    <div class="addStudent">
      <form action="">
        <label for="sno">학생번호</label>
        <input disabled type="text" id="sno" />
        <label for="sname">이름</label>
        <input type="text" id="sname" />
        <label for="score">점수</label>
        <input type="text" id="score" />
        <input type="submit" value="저장" />
      </form>
    </div>
    <script>
      // 저장이벤트.
      document.querySelector("form").addEventListener("submit", function (e) {
        e.preventDefault();
        let changedName = document.getElementById("sname").value;
        let changedScore = document.getElementById("score").value;
        // data 값을 변경.
        data.forEach((item) => {
          if (item.sno == sno) {
            item.sname = changedName;
            item.score = changedScore;
          }
        });
        localStorage.setItem("students", JSON.stringify(data)); // 저장.
        localStorage.removeItem("search");
        location.href = "index.html";
      });

      //  조회.
      let data = [];
      let sno = localStorage.getItem("search"); // 검색정보.
      if (!sno) {
        alert("정상적인 경로로 접근안했습니다.");
        location.href = "index.html";
      } else {
        data = JSON.parse(localStorage.getItem("students")); // 전체목록.
        let result = data.filter((item) => item.sno == sno)[0]; // 학생정보 검색.
        console.log(result);
        // 검색결과를 화면에  출력.
        document.getElementById("sno").value = result.sno;
        document.getElementById("sname").value = result.sname;
        document.getElementById("score").value = result.score;
      }
    </script>
  </body>
</html>
